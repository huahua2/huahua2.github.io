<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>顺势而为，HTML发展与UI组件设计进化 | HuaHua&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="转自(http://isux.tencent.com/development-of-ui-components-based-on-native-html.html)

在阅读本文之前，建议先阅读之前的一篇文章：“面向设计的半封装web组件开发”，便于理解文章的一些解惑。">
<meta property="og:type" content="article">
<meta property="og:title" content="顺势而为，HTML发展与UI组件设计进化">
<meta property="og:url" content="http://huahua2.github.io/2016/01/29/顺势而为，HTML发展与UI组件设计进化/index.html">
<meta property="og:site_name" content="HuaHua's Blog">
<meta property="og:description" content="转自(http://isux.tencent.com/development-of-ui-components-based-on-native-html.html)

在阅读本文之前，建议先阅读之前的一篇文章：“面向设计的半封装web组件开发”，便于理解文章的一些解惑。">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151223204108331-590x337.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20160113172239951.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20160113181504658.png">
<meta property="og:image" content="http://mat1.gtimg.com/www/mb/images/face/36.gif">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221150833418.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221151623905.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142540703.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142805210.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221154020659.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/2015122214303373.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221155007578.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161323875.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162536141.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162606553.png">
<meta property="og:image" content="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161027795.gif">
<meta property="og:image" content="http://mat1.gtimg.com/www/mb/images/face/1.gif">
<meta property="og:image" content="http://mat1.gtimg.com/www/mb/images/face/14.gif">
<meta property="og:updated_time" content="2016-01-29T07:01:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="顺势而为，HTML发展与UI组件设计进化">
<meta name="twitter:description" content="转自(http://isux.tencent.com/development-of-ui-components-based-on-native-html.html)

在阅读本文之前，建议先阅读之前的一篇文章：“面向设计的半封装web组件开发”，便于理解文章的一些解惑。">
  
    <link rel="alternative" href="/atom.xml" title="HuaHua&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/1.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/img/author.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">HuaHua</a></h1>
		</hgroup>

		
		<p class="header-subtitle">心有猛虎，细嗅蔷薇</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/categories/日志">日志</a></li>
				        
							<li><a href="/categories/学习笔记">学习笔记</a></li>
				        
							<li><a href="/categories/项目实战">项目实战</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://github.com/huahua2" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/lghua" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tags/css3/" style="font-size: 15px;">css3</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/hello-world/" style="font-size: 10px;">hello world</a> <a href="/tags/js/" style="font-size: 10px;">js</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/webapp/" style="font-size: 15px;">webapp</a> <a href="/tags/前端相关/" style="font-size: 10px;">前端相关</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://ued.taobao.org/blog/">淘宝UED</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://isux.tencent.com/">腾讯ISUX</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://bosjk.com">蓝海健康云</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">热衷研究前端的技术的前端er，在这里与你一起阅读、记录、思考、总结、分享…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">HuaHua</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/img/author.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">HuaHua</h1>
			</hgroup>
			
			<p class="header-subtitle">心有猛虎，细嗅蔷薇</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/categories/日志">日志</a></li>
		        
					<li><a href="/categories/学习笔记">学习笔记</a></li>
		        
					<li><a href="/categories/项目实战">项目实战</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://github.com/huahua2" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/lghua" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-顺势而为，HTML发展与UI组件设计进化" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/01/29/顺势而为，HTML发展与UI组件设计进化/" class="article-date">
  	<time datetime="2016-01-28T16:00:00.000Z" itemprop="datePublished">2016-01-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      顺势而为，HTML发展与UI组件设计进化
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端相关/">前端相关</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/学习笔记/">学习笔记</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>转自(<a href="http://isux.tencent.com/development-of-ui-components-based-on-native-html.html" target="_blank" rel="external">http://isux.tencent.com/development-of-ui-components-based-on-native-html.html</a>)</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151223204108331-590x337.png" alt="图片1"></p>
<p>在阅读本文之前，建议先阅读之前的一篇文章：“<a href="http://isux.tencent.com/half-package-web-components-for-design.html" target="_blank" rel="external">面向设计的半封装web组件开发</a>”，便于理解文章的一些解惑。<br><a id="more"></a></p>
<h3 id="一、现状">一、现状</h3><p><strong>1. 前端发展现状</strong></p>
<p>前端这几年的发展都是有目共睹的，然而，如果按照已经落地投入实践的标准梳理下，会发现，基本上都是偏后的JS开发层面的，比方说Node.js下的前后端分离，MV*库，React.js，各种包管理工具及前端集成解决方案等。</p>
<p>而往前，Shadow DOM, Web Components规范和标准虽然也出现了，给大家看到了方向和未来，但由于兼容性的问题（参见下表），或者可能缺乏优秀团队的强势引领，我们在实际的项目中鲜有看到。</p>
<iframe src="http://caniuse.com/shadowdom/embed" width="100%" height="420" frameborder="0"></iframe>

<p>就算有<a href="https://github.com/WebComponents/webcomponentsjs" target="_blank" rel="external">webcomponents.js</a>这样的polyfills处理，也只有IE11+才完全支持。</p>
<p>难道我们就这样干等着，直到Web Components一统江山的时候，我们才开始在HTML侧发力吗？这么多年HTML5的发展就这么白费了？我们做PC端的就因为一些过时的浏览器而止步不前？</p>
<p><strong>2. UI组件现状</strong></p>
<p>成熟的团队都有自己的一套组件库，以便各种项目来的时候，都能从容应对。</p>
<p>为了能够从容应对，我们必然要考虑周全，企业级，能应对大型项目，各种复杂场景，充分发挥组件的复用性。往往最终，会让组件变得比较重，逻辑比较复杂，API数量也比较多。我们不妨可以看下kissy 5.0的DatePicker的组件使用示意：</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20160113172239951.png" alt="顺势而为，HTML发展与UI组件设计进化"></p>
<p>如果我们单看功能，确实很强大，禁用日期可以任意自定义，可以轻松定义各个操作栏是否显示，确实是企业级的web组件，看上去能适应各种复杂场景。</p>
<p>但是，在我看来，问题却非常多。</p>
<ol>
<li>诸位静下心来想想看，我们所经历的项目，是不是绝大多数都不复杂，我们是否有必要使用企业级的大而重的产品？就好比你一个展示性为主的网站，却使用AngularJS MVVM来高大上。截趾适屦，敦云其愚。</li>
<li>看上去能适应各种场景，但是，眼下现代web技术飞速发展，UI层变化日新月异，你确定你这个组件能跟得上这些变化。怕是最后演变成，组件支持跟不上，而否决了设计师的一些想法。本末倒置了！</li>
<li>代码中出现了<code>GregorianCalendar</code>, <code>GregorianCalendarFormat</code>这样的方法或对象，请问在座的各位你知道这是个什么鬼吗？你知道他是干嘛用的吗？学习成本啊~~</li>
<li><p><code>render</code>, <code>showWeekNumber</code>, <code>showClear</code>, <code>showToday</code>, <code>disabledDate</code>这些API名称大家有没有觉得在哪里见过？</p>
<p>“好像是在哪儿见过？”</p>
<p>“好像个鬼啊，是之前根本就没见过！”</p>
<p>现在大家闭上眼睛，还记不记得这些API名称是什么？假设一周以后呢，你还记不记得。是不是你要去翻API文档了？使用成本啊~</p>
</li>
<li><p>想象这样的场景，项目启动了，负责组件的前端和负责业务的前端一起开工，谁知突然，负责组件的前端的老婆突然要临盆，不得不去陪产。此时负责业务的前端该怎么搞？会不会像这样一样在心中马景涛：“时间选择组件还没完成，这里的日期交互依赖组件，这不是丢锅给我接吗！？”可以看到，两人的开发被牵制了！两种结果，一是自己上，二是这块工作暂停。</p>
<p>所以大家发现没，组件和业务耦合在一起，不利于协作啊。比方说上面截图代码的<code>picker.on(&#39;select&#39;, function(e) {});</code>，组件不弄好，根本就没法使用啊！要么就自己先搞搞，回头再改，都是很烦的。</p>
</li>
</ol>
<h3 id="二、探索">二、探索</h3><p>正是由于当下有这些不如意的现状，所以我就一直在思考，有没有什么办法可以做出改变，不一定是大跨越式的一步到位，至少能指明柳暗花明的另一条路。</p>
<p>我们还是拿时间选择器举例，想想看，HTML5有没有为我们带来<code>native</code>的UI组件？对吧，有的，应该都知道的：</p>
<pre>&lt;input type="date"&gt;</pre>

<p><code>date</code>类型的<code>input</code>输入框，天然可以选择时间。</p>
<p><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20160113181504658.png" alt="顺势而为，HTML发展与UI组件设计进化"></p>
<p>我们可以使用<code>min</code>/<code>max</code>属性限制可以选择的时间范围，使用<code>value</code>确定当前选择日期。也就是说，从原始功能角度而言，原生的<code>date</code>时间选择可以满足绝大多数的业务需求。</p>
<p>这些符合标准，业界规范的HTML特性要是可以直接在实际项目中应用该多好啊！</p>
<p>然而，问题在于，浏览器原生的界面往往跟我们站点的设计风格有些不协调，说白了，就是设计师觉得丑，而且不能自由定义某些功能，例如清除。</p>
<p>还有一个很现实的问题是兼容性，包括IE11在内的IE浏览器都没有<code>type=&quot;date&quot;</code>组件行为，<img src="http://mat1.gtimg.com/www/mb/images/face/36.gif" alt="顺势而为，HTML发展与UI组件设计进化"> 这个补刀直接剐在了心头。</p>
<p>怎么办呢？</p>
<p>我们此时不妨梳理下：</p>
<pre>&lt;input type="date" min="2016-01-01" max="2016-12-31" value="2016-02-14"&gt;</pre>

<p><code>type</code>/<code>min</code>/<code>max</code>/<code>value</code>这些原生标准的HTML属性并没有问题，有问题的只是点击出现的那个长相简陋的选择浮层。所谓对症下药，哪个有问题就搞哪个，我们只要想办法把丑陋的浮层搞漂亮就可以了。</p>
<p>考虑到兼容性，我们其实可以和传统的时间选择器组件一样，对浮层内容进行自定义，注意，我们仅自定义浮层，HTML还是原始的。</p>
<p>我们构建一个名叫<code>DateTime</code>的实例方法，理想状况下，我们只要绑定初始化一下，类似这样：</p>
<pre>new DateTime($("[type=date]");</pre>

<p>然后duang，时间选择器浮层直接美化成设计师需要的模样，那该多完美啊！</p>
<p>梦想总是有的，万一实现了呢？</p>
<p>既然使用自定义的浮层，那就需要干掉浏览器原生的浮层，怎么弄呢？我们可以让<code>input</code>框<code>readonly</code>只读，这样，就不会出现原始的输入框了。</p>
<p>那<code>input</code>框内置的三角(需要隐藏)和斜杠(需要使用短横)该怎么办呢？ 这部分是支持自定义的，类似：</p>
<pre>::-webkit-clear-button,
::-webkit-inner-spin-button,
::-webkit-calendar-picker-indicator {
  display:none;
}
[type="date"]::-webkit-datetime-edit-text {
  color: transparent;
}
[type="date"]::-webkit-datetime-edit-text::before {
  content: '-';
  position: absolute;
}
::-webkit-datetime-edit-text,
::-webkit-datetime-edit-year-field,
::-webkit-datetime-edit-month-field,
::-webkit-datetime-edit-day-field,
::-webkit-datetime-edit-hour-field,
::-webkit-datetime-edit-minute-field,
::-webkit-datetime-edit-ampm-field {
  background: none;
}</pre>

<p>就可以把webkit下的时间输入框改造成我们想要的样子了，而IE等不支持date输入框的浏览器，保持原来的样子就可以。</p>
<p>于是乎，通过CSS和JS的配合，我们就可以实现基于原生HTML5标准的时间选择器了。</p>
<p>“稍等，怎么就实现了？”有人可能会有这样的疑问。</p>
<p>下面这段是我年轻时候使用过的一套组件库的初始化示意：</p>
<pre>new DatePicker($("#date"), {
  <span style="color: #cd0000;">type</span>: "date",
  <span style="color: #62009b;">initDate</span>: ..,
  <span style="color: #0da000;">beginDate</span>: ..,
  <span style="color: #006fc9;">endDate</span>: ..,
  onSelected: $.noop
});</pre>

<p>对比：</p>
<pre>&lt;input <span style="color: #cd0000;">type</span>="date" <span style="color: #0da000;">min</span>="2016-01-01" <span style="color: #006fc9;">max</span>="2016-12-31" <span style="color: #62009b;">value</span>="2016-02-14"&gt;</pre>

<p>我们是不是可以找到之间的关系？没错，这位同学好生眼力，HTML中的<code>type</code>属性对应JS中的<code>type</code> API, <code>value</code>属性值对应<code>initDate</code>值, <code>min</code>/<code>max</code>分别对应<code>beginDate</code>/<code>endDate</code>。其实内部实现跟传统的组件没什么差别。</p>
<p>那<code>onSelected</code>呢？<code>onSelected</code>是个回调方法，解读下就是当选择日期之后，干嘛干嘛。其实我们原生的<code>input</code>框有类似的事件，什么呢？<code>change</code>事件。既然，我们这里使用的是原生的HTML输入框，那我们就可以使用其原生的<code>change</code>事件。所以，什么<code>onSelected</code>回调，完全不需要。我们只要在组件内部，当赋值的同时<code>trigger</code>下原生的<code>change</code>事件。</p>
<p>于是乎，我们就得到了一个HTML是原生，API也是原生，事件也是原生，UI自定义的时间选择控件。真真切切将HTML5应用到了实际项目中，同时，就算是是10年前的IE6也是可以兼容。</p>
<p>完美！</p>
<p>然而，一定会有小伙伴提出质疑，你这个功能也太局限了吧，如果遇到特殊需求，例如，所有的周末都不能选择，你怎么整？</p>
<p>OK，此时就需要“<a href="http://isux.tencent.com/half-package-web-components-for-design.html" target="_blank" rel="external">面向设计的半封装web组件开发</a>”的这篇文章出马了？</p>
<p>之所以有人会提出上面的质疑，还是按照了传统组件的思维方式去思考。没错，确实有些项目的时间组件要求周末不能选择。但是，你现在做的这个项目，有这个需求吗？你好好想想。</p>
<p>CSS3现在发展越来越成熟，UI层的变化越来越迅速和不可预知，这种趋势，要求我们的UI组件要轻快，灵活，随时可以根据上层变化做调整。而那种妄图考虑各种场景，代码又大又冗余的组件开发方式已经越来越不适应未来的潮流了。</p>
<p>如果你真的遇到“周末都不能选择”的需求，我告诉你怎么办？自定义一个名为”<code>date-no-weekend</code>“的<code>type</code>类型，内部的JS代码当然该重用的重用，该模块化的模块化：</p>
<pre>&lt;input type="date-no-weekend"&gt;</pre>

<p>还是觉得难以接受，仔细品味后面这句话：组件要面向设计，落地项目，追求品质。</p>
<p>好，我们现在实现了基于HTML5时间选择组件落地实践生产，加以推广，势必对HTML5标准在国内的学习与普及带来帮助。</p>
<p>然而，就单单一个组件，势单力薄，怕是针落大海，激不起一点水花，其他些组件是不是也可以找这种面向HTML的思路去开发呢？</p>
<p>有！</p>
<p>告诉大家，QQ公众平台的UI组件体系贯穿始终，就是基于面向HTML标准开发的思想实现，同时借助面向设计的开发思想，让组件极致体验，同时轻便快捷，风一吹就可以飞到天上去。</p>
<h3 id="三、实践">三、实践</h3><p>QQ公众平台的UI组件实现，和传统实现是完全不同的设计思想。从JS层进一步往下沉淀了一个层次，基于原生的HTML实现。</p>
<p>多说无益，眼见为实（狠击下面）。</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162207754.html" target="_blank" rel="external"><strong>demo-点击这里-demo</strong></a></p>
<p>点击上面的demo, 进入一个平凡的静态页面，引入眼帘的是一个普通的表单，里面的UI都是系统默认的，HTML功能也是原生的。</p>
<div><strong>例如：</strong></div>

<ul>
<li><p>title提示</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221150833418.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221150833418.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
<li><p>选择日期</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221151623905.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221151623905.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
<li><p>点击提交的表单验证</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142540703.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142540703.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
<div style="margin-top: 28px; margin-bottom: 20px;">UI虽然原始，但是功能却是很健全的。</div><br><div><strong>例如：</strong></div>
</li>
<li><p>男女款式、城市以及运费险对价格的影响</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142805210.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151222142805210.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
<li><p>表单提交事件</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221154020659.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221154020659.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
<div style="margin-top: 38px;">下面，见证奇迹的时刻到了，点击demo页面（下图所示）的按钮进行QQ公众平台UI组件资源的加载和初始化：</div>

</li>
</ul>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/2015122214303373.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/2015122214303373.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
<p>结果，一瞬间，上面原始粗糙的界面一下子变成了这样子：</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221155007578.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221155007578.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
<p>妥妥的丑小鸭变成了白天鹅，包括之前原生的HTML功能。</p>
<div><strong>例如：</strong></div>

<ul>
<li><p>title提示</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161323875.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161323875.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
<li><p>选择日期</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162536141.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162536141.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
<li><p>点击提交的表单验证</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162606553.png" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221162606553.png" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
</li>
</ul>
<p>而，最最重要，和<strong>最最神奇的事情是</strong>：我们仅仅是引入了QQ公众平台的UI组件，对，仅仅是引入和一点初始化，没有动之前一点点一丝丝的业务JS. 但是，之前的各种交互功能，却完全不受影响，反而体验更上两层楼！</p>
<p>请看下面的gif截图演示：</p>
<p><a href="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161027795.gif" target="_blank" rel="external"><img src="http://isux.tencent.com/wp-content/uploads/2015/12/20151221161027795.gif" alt="顺势而为，HTML发展与UI组件设计进化"></a></p>
<p>真是一场意外之旅，发现没，面向HTML开发，实际上不是简单推动了HTML5等现代web技术落地实践，对我们的开发流程等也带来了巨大帮助——UI组件可以和业务JavaScript完全分离，可以实现无缝对接。就是因为整个组件体系基于原生HTML开发的设计理念，让UI组件回归了其本质或者说本职作用——UI.</p>
<h3 id="四、优势">四、优势</h3><p>下面总结下面向HTML的UI组件开发的优势。</p>
<p><strong>1. HTML/CSS侧的现代产物落地实践</strong></p>
<p>基于HTML标准来开发我们的UI组件，通过技术跨越各种兼容问题，使得我们前端技术在HTML层也乘上了现代web技术的快车，标准的HTML5规范和属性提前很多年在广受众的传统PC页面呈现，我觉得是非常有意义的一件事情。</p>
<p><strong>2. 规避了传统组件的很多问题</strong></p>
<ol>
<li>更强的语义化，可访问性，SEO等；</li>
<li>学习和使用成本低；</li>
<li>专注HTML控件本身，而不是组件；</li>
<li>可以一次性全局处理；<div style="margin: 30px 0 10px;"><strong>①. 语义化，可访问性</strong></div>

</li>
</ol>
<p>毕竟是基于原生HTML来开发的，这一块必定杠杠的。</p>
<p>例如，时间选择：</p>
<pre>&lt;input type="date"&gt;</pre>

<p>显然语义要比下面的<code>text</code>类型要好：</p>
<pre>&lt;input type="text"&gt;</pre>

<p>又如基于<code>checkbox</code>/<code>radio</code>类型的<code>input</code>框模拟的单复选框自然要比传统<code>div</code>元素模拟的无论是语义、设备可访问性都要高很多。</p>
<div style="margin: 30px 0 10px;"><strong>②. 更低的学习和使用成本</strong></div>

<p>不会出现类似<code>GregorianCalendar</code>, <code>GregorianCalendarFormat</code>一眼不知道干嘛的对象和方法。</p>
<p>不需要记住类似<code>showWeekNumber</code>, <code>showClear</code>, <code>showToday</code>, <code>disabledDate</code>这样千差万别的JS API名称，记住标准的HTML5属性即可，只要记住一次，终身受用，放心，不会变的，HTML5文案已经定稿了。</p>
<p>而学习成本低对于跨团队合作非常有帮助。你说kissy上手快，还是只需要写写标准HTML就OK上手快！</p>
<p>其他团队同学乐于使用你的东西，介入快，实现效果好，大家都开心。反之，API千差万别，每次使用都要去翻文档，肯定影响合作。</p>
<p>不过，实践下来，有一点学习成本我没考虑到，就是转换思维方式的学习成本。实际上只要面向元素的HTML元素开发就可以了，但是有遇到小伙伴，还是按照老的思维方式，在生成的UI组件元素上做文章。 <img src="http://mat1.gtimg.com/www/mb/images/face/1.gif" alt="顺势而为，HTML发展与UI组件设计进化"></p>
<div style="margin: 30px 0 10px;"><strong>③. 专注HTML控件本身，而不是组件</strong></div>

<p>举个例子，日期选择器，当日期修改了，我们要干嘛干嘛，直接：</p>
<pre>$("input").change(function() {});</pre>

<p>想要修改日期范围，直接：</p>
<pre>$("input").attr({
  "min": "2015-12-27",
  "max": "2016-12-27"
});</pre>

<p>UI组件会自动同步。没有任何组件相关的JS代码，也没有什么故弄玄虚，没有所谓的高屋建瓴，全是很简单基础的HTML操作。是不是这样的开发反而很省心，连小白用户也能上手？</p>
<p>于是乎，在多团队联合协作开发的时候，前端开发的进度并不会受UI组件开发影响，面向HTML，专心自身业务开发就可以了。</p>
<p>负责组件开发的前端去休陪产假了，负责业务的前端，直接按照标准的HTML控件元素是实现自己的业务逻辑，什么回调啊都直接使用原生的事件和方法。等负责组件开发的前端，回来了，哪怕拖了个把星期，只要组件完成，公共JS一初始化，业务JS没有任何修改，无缝对接。</p>
<p>于是乎，实现了一个听上去很了不得的东西：<strong>前端分离</strong>。</p>
<p>这对于整个开发流程和效率也带来了巨大的提升。</p>
<p>不仅如此，厂子里有很多开发，负责内部项目，会写JS擅长业务功能实现，但是，UI这块是个软肋。OK，此时，我们这里面向HTML开发的UI组件体系就是其救星，对吧，直接引入CSS和JS，简单全局初始化一下（可能还有一些简单的微调），结果，页面立马高大上了，是不是很有用！</p>
<div style="margin: 30px 0 10px;"><strong>④. 可以一次性全局处理</strong></div>

<p>传统实现，每个具体业务的脚本里面要参与UI组件的具体API参数设置。而面向HTML的实现，API落地与具体的业务页面，于是乎，只要在项目的common.js中全局初始化一下，如下拉<code>Select.init()</code>, 具体的业务JS文件（绝大多数情况下）中就无需再出现UI组件相关的JS代码。</p>
<p>UI层的JS代码和业务层JS代码分离，实现进一步的「前端分离」，去耦合。对于日后的维护、升级等要比传统组件更轻松。</p>
<h3 id="五、结果">五、结果</h3><p>面向HTML的UI组件开发贯穿于整个QQ公众平台UI组件体系。包括上面没出现过的range范围选择，自定义滚动效果等等。</p>
<p>从实践的结果来看，前端同事啧啧称赞过（功能层），我们设计中心这边leader希望这套可以推到其他team去（体验层）。</p>
<p>大家有兴趣，不妨速度加入QQ公众平台，也来体验下，欢迎反馈以及提出宝贵意见。</p>
<h3 id="六、结语">六、结语</h3><p>一个<code>type=&quot;date&quot;</code>的<code>input</code>框实际上就是一个终极的Web Components，一小段<code>&amp;lt;input&amp;gt;</code>就是一个可以被<code>import</code>的模块，然后就可以出现界面复杂的组件效果(shadow DOM)，而API就是HTML的原生属性。</p>
<p>QQ公众平台UI组件离Web Components到底有多远？如果说传统的web组件距离是1条长安街的话，那QQ公众平台UI组件只有0.5条长安街的距离。</p>
<p>HTML和API利用了原生的Web Components模式，非Web Components模式的仅仅是自定义的浮层这一块，但是，设计思想和思路都是朝着Web Components模式前进的。</p>
<p>换句话说，虽然无法一步直达Web Components，但是，我们可以利用HTML的发展，通过一些策略和设计，对UI组件进行一些变革，让其在朝着Web Components前进的道路上迈出一大步。</p>
<p>本文主讲设计思想，至于具体的技术细节，以后有机会会慢慢分享，能够讲的点非常非常多，越是简单的成品越是需要足够的积累。</p>
<p>以上，希望本文的内容能够对大家有一点启示。</p>
<p><img src="http://mat1.gtimg.com/www/mb/images/face/14.gif" alt="顺势而为，HTML发展与UI组件设计进化"></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/01/28/省时的浏览器同步测试工具/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">省时的浏览器同步测试工具</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="顺势而为，HTML发展与UI组件设计进化" data-title="顺势而为，HTML发展与UI组件设计进化" data-url="http://huahua2.github.io/2016/01/29/顺势而为，HTML发展与UI组件设计进化/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"lghua"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 HuaHua
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>